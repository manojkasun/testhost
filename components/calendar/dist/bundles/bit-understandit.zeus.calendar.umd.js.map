{"version":3,"file":"bit-understandit.zeus.calendar.umd.js","sources":["ng://@bit/understandit.zeus.calendar/calendar-month.ts","ng://@bit/understandit.zeus.calendar/calendar.component.ts","ng://@bit/understandit.zeus.calendar/calendar.module.ts"],"sourcesContent":["/**\n * @file \n */\n\nimport dayjs from 'dayjs';\n\n/**\n * Represents a day in the calendar month.\n */\nexport interface Day {\n  date: Date;\n  day: string;\n  inMonth: boolean;\n  hasActivity: boolean;\n  isToday: boolean;\n  selected: boolean;\n}\n\n/**\n * Class to represent a calendar month used in the calendar component.\n */\nexport class CalendarMonth {\n\n  weeks: Day[][];\n\n  static DAYS_IN_WEEK = 7;\n  static WEEKS_IN_CALENDAR_MONTH = 6;\n  static DAYS_IN_CALENDAR_MONTH = CalendarMonth.DAYS_IN_WEEK * CalendarMonth.WEEKS_IN_CALENDAR_MONTH;\n\n  constructor(public date: Date) {\n    this.weeks = this.generateWeeks(this.date);\n  }\n\n  /**\n   * Generate days and weeks in a calendar month.\n   *\n   * @param date\n   *   Date in month to generate.\n   *\n   * @return\n   *   Two dimensional array representing the calendar month.\n   */\n  generateWeeks(date: Date): Day[][] {\n    const today = new Date();\n    let t0 = dayjs(date).startOf('month').startOf('week');\n    let weeks: Day[][] = [];\n    for (let i = 0; i < CalendarMonth.WEEKS_IN_CALENDAR_MONTH; i++) {\n      let week: Day[] = [];\n      for (let d = 0; d < CalendarMonth.DAYS_IN_WEEK; d++) {\n        week.push({\n          date: t0.toDate(),\n          day: t0.format('D'),\n          inMonth: t0.isSame(date, 'month'),\n          hasActivity: false,\n          isToday: t0.isSame(today, 'day'),\n          selected: false,\n        });\n        t0 = t0.add(1, 'day');\n      }\n      weeks.push(week);\n    }\n    return weeks;\n  }\n\n  /**\n   * Gets a day given index in calendar month.\n   *\n   * @param index\n   *   Index to get.\n   *\n   * @returns\n   *   Day on given index.\n   */\n  getDayByIndex(index: number): Day {\n    return this.weeks[Math.floor(index / CalendarMonth.DAYS_IN_WEEK)][index % CalendarMonth.DAYS_IN_WEEK];\n  }\n\n  getNextMonth() {\n    return new CalendarMonth(dayjs(this.date).add(1, 'month').toDate());\n  }\n\n  getPreviousMonth() {\n    return new CalendarMonth(dayjs(this.date).subtract(1, 'month').toDate());\n  }\n\n  inMonth(date: Date) {\n    return dayjs(this.date).isSame(date, 'month');\n  }\n\n}\n","import { Component, Input, HostListener } from '@angular/core';\n\nimport { CalendarMonth } from './calendar-month';\nimport { analyzeAndValidateNgModules } from '@angular/compiler';\n\n@Component({\n  selector: 'app-calendar',\n  templateUrl: './calendar.component.html',\n  styleUrls: ['./calendar.component.scss']\n})\nexport class CalendarComponent {\n\n  today = new Date();\n  currentMonth: CalendarMonth;\n\n  private _value: Date;\n\n  // @Output()\n  // viewChange = new EventEmitter<Month>(true);\n\n  // @Output()\n  // valueChange = new EventEmitter<Date>(true);\n\n  // @Input()\n  // set dataSource(data: EventResponse[]) {\n\n  //   if (!this.currentMonth) {\n  //     return;\n  //   }\n\n  //   let event = getNextEventDay(data);\n  //   for (let dayIndex = 0; dayIndex < DAYS_IN_CALENDAR_MONTH; dayIndex++) {\n  //     let day = this.currentMonth.getDayByIndex(dayIndex);\n\n  //     if (event && Moment(event.date.value).isSame(day.date, 'day')) {\n  //       day.hasActivity = true;\n  //       // Advance event index to next event not on same day\n  //       event = getNextEventDay(data, event);\n  //     }\n  //     else {\n  //       day.hasActivity = false;\n  //     }\n  //   }\n  // }\n\n  set value(value: Date) {\n    if (value !== this._value) {\n      this._value = value;\n      // this.valueChange.emit(value);\n      if (!this.currentMonth || !this.currentMonth.inMonth(value)) {\n        this.goTo(new CalendarMonth(value));\n      }\n    }\n  }\n\n  get value() {\n    return this._value;\n  }\n\n  constructor() {\n    // Set default value to current date.\n    this._value = new Date();\n    this.currentMonth = new CalendarMonth(this._value);\n  }\n\n  goNext() {\n    this.goTo(this.currentMonth.getNextMonth());\n  }\n\n  goPrev() {\n    this.goTo(this.currentMonth.getPreviousMonth());\n  }\n\n  goTo(month: CalendarMonth) {\n    this.currentMonth = month;\n    // this.viewChange.emit(this.currentMonth);\n  }\n\n  hasActivity(day: Date) {\n    return false;\n    //return this.dataSource && this.dataSource.some(x => Moment(x.date.value).isSame(day, 'day'));\n  }\n\n  isSelected(day: Date) {\n    return false;\n    // return Moment(day).isSame(this._value, 'day');\n  }\n\n  // @HostListener('swipe', ['$event'])\n  // onSwipe(event) {\n  //   if (event.velocityX > 0) {\n  //     this.goPrev();\n  //   }\n  //   else if (event.velocityX < 0) {\n  //     this.goNext();\n  //   }\n  // }\n\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { CalendarComponent } from './calendar.component';\n\n@NgModule({\n  declarations: [CalendarComponent],\n  imports: [\n    CommonModule\n  ],\n  exports: [\n    CalendarComponent\n  ]\n})\nexport class CalendarModule { }\n"],"names":["Component","NgModule","CommonModule"],"mappings":"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"}
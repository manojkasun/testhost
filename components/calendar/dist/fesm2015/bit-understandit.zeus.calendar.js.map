{"version":3,"file":"bit-understandit.zeus.calendar.js","sources":["ng://@bit/understandit.zeus.calendar/calendar-month.ts","ng://@bit/understandit.zeus.calendar/calendar.component.ts","ng://@bit/understandit.zeus.calendar/calendar.module.ts"],"sourcesContent":["/**\n * @file \n */\n\nimport dayjs from 'dayjs';\n\n/**\n * Represents a day in the calendar month.\n */\nexport interface Day {\n  date: Date;\n  day: string;\n  inMonth: boolean;\n  hasActivity: boolean;\n  isToday: boolean;\n  selected: boolean;\n}\n\n/**\n * Class to represent a calendar month used in the calendar component.\n */\nexport class CalendarMonth {\n\n  weeks: Day[][];\n\n  static DAYS_IN_WEEK = 7;\n  static WEEKS_IN_CALENDAR_MONTH = 6;\n  static DAYS_IN_CALENDAR_MONTH = CalendarMonth.DAYS_IN_WEEK * CalendarMonth.WEEKS_IN_CALENDAR_MONTH;\n\n  constructor(public date: Date) {\n    this.weeks = this.generateWeeks(this.date);\n  }\n\n  /**\n   * Generate days and weeks in a calendar month.\n   *\n   * @param date\n   *   Date in month to generate.\n   *\n   * @return\n   *   Two dimensional array representing the calendar month.\n   */\n  generateWeeks(date: Date): Day[][] {\n    const today = new Date();\n    let t0 = dayjs(date).startOf('month').startOf('week');\n    let weeks: Day[][] = [];\n    for (let i = 0; i < CalendarMonth.WEEKS_IN_CALENDAR_MONTH; i++) {\n      let week: Day[] = [];\n      for (let d = 0; d < CalendarMonth.DAYS_IN_WEEK; d++) {\n        week.push({\n          date: t0.toDate(),\n          day: t0.format('D'),\n          inMonth: t0.isSame(date, 'month'),\n          hasActivity: false,\n          isToday: t0.isSame(today, 'day'),\n          selected: false,\n        });\n        t0 = t0.add(1, 'day');\n      }\n      weeks.push(week);\n    }\n    return weeks;\n  }\n\n  /**\n   * Gets a day given index in calendar month.\n   *\n   * @param index\n   *   Index to get.\n   *\n   * @returns\n   *   Day on given index.\n   */\n  getDayByIndex(index: number): Day {\n    return this.weeks[Math.floor(index / CalendarMonth.DAYS_IN_WEEK)][index % CalendarMonth.DAYS_IN_WEEK];\n  }\n\n  getNextMonth() {\n    return new CalendarMonth(dayjs(this.date).add(1, 'month').toDate());\n  }\n\n  getPreviousMonth() {\n    return new CalendarMonth(dayjs(this.date).subtract(1, 'month').toDate());\n  }\n\n  inMonth(date: Date) {\n    return dayjs(this.date).isSame(date, 'month');\n  }\n\n}\n","import { Component, Input, HostListener } from '@angular/core';\n\nimport { CalendarMonth } from './calendar-month';\nimport { analyzeAndValidateNgModules } from '@angular/compiler';\n\n@Component({\n  selector: 'app-calendar',\n  templateUrl: './calendar.component.html',\n  styleUrls: ['./calendar.component.scss']\n})\nexport class CalendarComponent {\n\n  today = new Date();\n  currentMonth: CalendarMonth;\n\n  private _value: Date;\n\n  // @Output()\n  // viewChange = new EventEmitter<Month>(true);\n\n  // @Output()\n  // valueChange = new EventEmitter<Date>(true);\n\n  // @Input()\n  // set dataSource(data: EventResponse[]) {\n\n  //   if (!this.currentMonth) {\n  //     return;\n  //   }\n\n  //   let event = getNextEventDay(data);\n  //   for (let dayIndex = 0; dayIndex < DAYS_IN_CALENDAR_MONTH; dayIndex++) {\n  //     let day = this.currentMonth.getDayByIndex(dayIndex);\n\n  //     if (event && Moment(event.date.value).isSame(day.date, 'day')) {\n  //       day.hasActivity = true;\n  //       // Advance event index to next event not on same day\n  //       event = getNextEventDay(data, event);\n  //     }\n  //     else {\n  //       day.hasActivity = false;\n  //     }\n  //   }\n  // }\n\n  set value(value: Date) {\n    if (value !== this._value) {\n      this._value = value;\n      // this.valueChange.emit(value);\n      if (!this.currentMonth || !this.currentMonth.inMonth(value)) {\n        this.goTo(new CalendarMonth(value));\n      }\n    }\n  }\n\n  get value() {\n    return this._value;\n  }\n\n  constructor() {\n    // Set default value to current date.\n    this._value = new Date();\n    this.currentMonth = new CalendarMonth(this._value);\n  }\n\n  goNext() {\n    this.goTo(this.currentMonth.getNextMonth());\n  }\n\n  goPrev() {\n    this.goTo(this.currentMonth.getPreviousMonth());\n  }\n\n  goTo(month: CalendarMonth) {\n    this.currentMonth = month;\n    // this.viewChange.emit(this.currentMonth);\n  }\n\n  hasActivity(day: Date) {\n    return false;\n    //return this.dataSource && this.dataSource.some(x => Moment(x.date.value).isSame(day, 'day'));\n  }\n\n  isSelected(day: Date) {\n    return false;\n    // return Moment(day).isSame(this._value, 'day');\n  }\n\n  // @HostListener('swipe', ['$event'])\n  // onSwipe(event) {\n  //   if (event.velocityX > 0) {\n  //     this.goPrev();\n  //   }\n  //   else if (event.velocityX < 0) {\n  //     this.goNext();\n  //   }\n  // }\n\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { CalendarComponent } from './calendar.component';\n\n@NgModule({\n  declarations: [CalendarComponent],\n  imports: [\n    CommonModule\n  ],\n  exports: [\n    CalendarComponent\n  ]\n})\nexport class CalendarModule { }\n"],"names":[],"mappings":"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"}